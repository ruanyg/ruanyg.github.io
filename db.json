{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"themes/landscape/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/blank.gif","path":"fancybox/blank.gif","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_loading.gif","path":"fancybox/fancybox_loading.gif","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_loading@2x.gif","path":"fancybox/fancybox_loading@2x.gif","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_overlay.png","path":"fancybox/fancybox_overlay.png","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_sprite.png","path":"fancybox/fancybox_sprite.png","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_sprite@2x.png","path":"fancybox/fancybox_sprite@2x.png","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.css","path":"fancybox/jquery.fancybox.css","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.js","path":"fancybox/jquery.fancybox.js","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.pack.js","path":"fancybox/jquery.fancybox.pack.js","modified":1,"renderable":1},{"_id":"themes/landscape/source/js/script.js","path":"js/script.js","modified":1,"renderable":1},{"_id":"themes/landscape/source/css/fonts/FontAwesome.otf","path":"css/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.eot","path":"css/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.woff","path":"css/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/fancybox_buttons.png","path":"fancybox/helpers/fancybox_buttons.png","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.css","path":"fancybox/helpers/jquery.fancybox-buttons.css","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.js","path":"fancybox/helpers/jquery.fancybox-buttons.js","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-media.js","path":"fancybox/helpers/jquery.fancybox-media.js","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.css","path":"fancybox/helpers/jquery.fancybox-thumbs.css","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.js","path":"fancybox/helpers/jquery.fancybox-thumbs.js","modified":1,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.ttf","path":"css/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.svg","path":"css/fonts/fontawesome-webfont.svg","modified":1,"renderable":1},{"_id":"themes/landscape/source/css/images/banner.jpg","path":"css/images/banner.jpg","modified":1,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"6daaab2190ac31bb36096a50bcf9fac446735e2f","modified":1584534957132},{"_id":"themes/landscape/.gitignore","hash":"58d26d4b5f2f94c2d02a4e4a448088e4a2527c77","modified":1584533819732},{"_id":"themes/landscape/Gruntfile.js","hash":"71adaeaac1f3cc56e36c49d549b8d8a72235c9b9","modified":1584533819732},{"_id":"themes/landscape/LICENSE","hash":"c480fce396b23997ee23cc535518ffaaf7f458f8","modified":1584533819732},{"_id":"themes/landscape/README.md","hash":"37fae88639ef60d63bd0de22314d7cc4c5d94b07","modified":1584533819733},{"_id":"themes/landscape/_config.yml","hash":"79ac6b9ed6a4de5a21ea53fc3f5a3de92e2475ff","modified":1584533819733},{"_id":"themes/landscape/package.json","hash":"544f21a0b2c7034998b36ae94dba6e3e0f39f228","modified":1584533819743},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1584534666144},{"_id":"source/_posts/mysql-master-slave.md","hash":"48bea185272ac733c625a60484ed7b21e7575a28","modified":1584528091500},{"_id":"source/_posts/zsh.md","hash":"49db78989289714a35cc1aa39370b7a8b676bd97","modified":1584544739604},{"_id":"source/_posts/搭建hexo+github博客.md","hash":"5a07583f3cbaa026dcff1c74301dcab8657a71c4","modified":1584538830954},{"_id":"themes/landscape/languages/de.yml","hash":"3ebf0775abbee928c8d7bda943c191d166ded0d3","modified":1584533819733},{"_id":"themes/landscape/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1584533819733},{"_id":"themes/landscape/languages/es.yml","hash":"76edb1171b86532ef12cfd15f5f2c1ac3949f061","modified":1584533819733},{"_id":"themes/landscape/languages/fr.yml","hash":"415e1c580ced8e4ce20b3b0aeedc3610341c76fb","modified":1584533819734},{"_id":"themes/landscape/languages/ja.yml","hash":"a73e1b9c80fd6e930e2628b393bfe3fb716a21a9","modified":1584533819734},{"_id":"themes/landscape/languages/ko.yml","hash":"881d6a0a101706e0452af81c580218e0bfddd9cf","modified":1584533819734},{"_id":"themes/landscape/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1584533819735},{"_id":"themes/landscape/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1584533819735},{"_id":"themes/landscape/languages/pt.yml","hash":"57d07b75d434fbfc33b0ddb543021cb5f53318a8","modified":1584533819735},{"_id":"themes/landscape/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1584533819735},{"_id":"themes/landscape/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1584533819735},{"_id":"themes/landscape/languages/zh-TW.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1584533819736},{"_id":"themes/landscape/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1584533819741},{"_id":"themes/landscape/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1584533819741},{"_id":"themes/landscape/layout/index.ejs","hash":"aa1b4456907bdb43e629be3931547e2d29ac58c8","modified":1584533819741},{"_id":"themes/landscape/layout/layout.ejs","hash":"f155824ca6130080bb057fa3e868a743c69c4cf5","modified":1584533819742},{"_id":"themes/landscape/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1584533819742},{"_id":"themes/landscape/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1584533819742},{"_id":"themes/landscape/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1584533819742},{"_id":"themes/landscape/scripts/fancybox.js","hash":"aa411cd072399df1ddc8e2181a3204678a5177d9","modified":1584533819743},{"_id":"themes/landscape/layout/_partial/after-footer.ejs","hash":"d0d753d39038284d52b10e5075979cc97db9cd20","modified":1584533819736},{"_id":"themes/landscape/layout/_partial/archive-post.ejs","hash":"c7a71425a946d05414c069ec91811b5c09a92c47","modified":1584533819736},{"_id":"themes/landscape/layout/_partial/archive.ejs","hash":"950ddd91db8718153b329b96dc14439ab8463ba5","modified":1584533819737},{"_id":"themes/landscape/layout/_partial/article.ejs","hash":"c4c835615d96a950d51fa2c3b5d64d0596534fed","modified":1584533819737},{"_id":"themes/landscape/layout/_partial/footer.ejs","hash":"93518893cf91287e797ebac543c560e2a63b8d0e","modified":1584533819737},{"_id":"themes/landscape/layout/_partial/gauges-analytics.ejs","hash":"aad6312ac197d6c5aaf2104ac863d7eba46b772a","modified":1584533819737},{"_id":"themes/landscape/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1584533819738},{"_id":"themes/landscape/layout/_partial/head.ejs","hash":"5abf77aec957d9445fc71a8310252f0013c84578","modified":1584533819738},{"_id":"themes/landscape/layout/_partial/header.ejs","hash":"7e749050be126eadbc42decfbea75124ae430413","modified":1584533819738},{"_id":"themes/landscape/layout/_partial/mobile-nav.ejs","hash":"e952a532dfc583930a666b9d4479c32d4a84b44e","modified":1584533819738},{"_id":"themes/landscape/layout/_partial/sidebar.ejs","hash":"930da35cc2d447a92e5ee8f835735e6fd2232469","modified":1584533819740},{"_id":"themes/landscape/layout/_widget/archive.ejs","hash":"beb4a86fcc82a9bdda9289b59db5a1988918bec3","modified":1584533819740},{"_id":"themes/landscape/layout/_widget/category.ejs","hash":"dd1e5af3c6af3f5d6c85dfd5ca1766faed6a0b05","modified":1584533819740},{"_id":"themes/landscape/layout/_widget/recent_posts.ejs","hash":"0d4f064733f8b9e45c0ce131fe4a689d570c883a","modified":1584533819741},{"_id":"themes/landscape/layout/_widget/tag.ejs","hash":"2de380865df9ab5f577f7d3bcadf44261eb5faae","modified":1584533819741},{"_id":"themes/landscape/layout/_widget/tagcloud.ejs","hash":"b4a2079101643f63993dcdb32925c9b071763b46","modified":1584533819741},{"_id":"themes/landscape/source/css/_extend.styl","hash":"222fbe6d222531d61c1ef0f868c90f747b1c2ced","modified":1584533819743},{"_id":"themes/landscape/source/css/_variables.styl","hash":"628e307579ea46b5928424313993f17b8d729e92","modified":1584533819746},{"_id":"themes/landscape/source/css/style.styl","hash":"a70d9c44dac348d742702f6ba87e5bb3084d65db","modified":1584533819753},{"_id":"themes/landscape/source/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1584533819753},{"_id":"themes/landscape/source/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1584533819754},{"_id":"themes/landscape/source/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1584533819754},{"_id":"themes/landscape/source/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1584533819755},{"_id":"themes/landscape/source/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1584533819755},{"_id":"themes/landscape/source/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1584533819755},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.css","hash":"aaa582fb9eb4b7092dc69fcb2d5b1c20cca58ab6","modified":1584533819757},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.js","hash":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed","modified":1584533819757},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.pack.js","hash":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1584533819758},{"_id":"themes/landscape/source/js/script.js","hash":"2876e0b19ce557fca38d7c6f49ca55922ab666a1","modified":1584533819758},{"_id":"themes/landscape/layout/_partial/post/category.ejs","hash":"c6bcd0e04271ffca81da25bcff5adf3d46f02fc0","modified":1584533819739},{"_id":"themes/landscape/layout/_partial/post/date.ejs","hash":"6197802873157656e3077c5099a7dda3d3b01c29","modified":1584533819739},{"_id":"themes/landscape/layout/_partial/post/gallery.ejs","hash":"3d9d81a3c693ff2378ef06ddb6810254e509de5b","modified":1584533819739},{"_id":"themes/landscape/layout/_partial/post/nav.ejs","hash":"16a904de7bceccbb36b4267565f2215704db2880","modified":1584533819739},{"_id":"themes/landscape/layout/_partial/post/tag.ejs","hash":"2fcb0bf9c8847a644167a27824c9bb19ac74dd14","modified":1584533819739},{"_id":"themes/landscape/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1584533819739},{"_id":"themes/landscape/source/css/_partial/archive.styl","hash":"db15f5677dc68f1730e82190bab69c24611ca292","modified":1584533819743},{"_id":"themes/landscape/source/css/_partial/article.styl","hash":"10685f8787a79f79c9a26c2f943253450c498e3e","modified":1584533819744},{"_id":"themes/landscape/source/css/_partial/comment.styl","hash":"79d280d8d203abb3bd933ca9b8e38c78ec684987","modified":1584533819744},{"_id":"themes/landscape/source/css/_partial/header.styl","hash":"85ab11e082f4dd86dde72bed653d57ec5381f30c","modified":1584533819744},{"_id":"themes/landscape/source/css/_partial/footer.styl","hash":"e35a060b8512031048919709a8e7b1ec0e40bc1b","modified":1584533819744},{"_id":"themes/landscape/source/css/_partial/mobile.styl","hash":"a399cf9e1e1cec3e4269066e2948d7ae5854d745","modified":1584533819745},{"_id":"themes/landscape/source/css/_partial/highlight.styl","hash":"bf4e7be1968dad495b04e83c95eac14c4d0ad7c0","modified":1584533819744},{"_id":"themes/landscape/source/css/_partial/sidebar-aside.styl","hash":"890349df5145abf46ce7712010c89237900b3713","modified":1584533819745},{"_id":"themes/landscape/source/css/_partial/sidebar.styl","hash":"404ec059dc674a48b9ab89cd83f258dec4dcb24d","modified":1584533819745},{"_id":"themes/landscape/source/css/_partial/sidebar-bottom.styl","hash":"8fd4f30d319542babfd31f087ddbac550f000a8a","modified":1584533819745},{"_id":"themes/landscape/source/css/_util/grid.styl","hash":"0bf55ee5d09f193e249083602ac5fcdb1e571aed","modified":1584533819746},{"_id":"themes/landscape/source/css/_util/mixin.styl","hash":"44f32767d9fd3c1c08a60d91f181ee53c8f0dbb3","modified":1584533819746},{"_id":"themes/landscape/source/css/fonts/FontAwesome.otf","hash":"b5b4f9be85f91f10799e87a083da1d050f842734","modified":1584533819747},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.eot","hash":"7619748fe34c64fb157a57f6d4ef3678f63a8f5e","modified":1584533819748},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.woff","hash":"04c3bf56d87a0828935bd6b4aee859995f321693","modified":1584533819750},{"_id":"themes/landscape/source/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1584533819755},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1584533819756},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.js","hash":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1584533819756},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-media.js","hash":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1584533819756},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1584533819756},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1584533819756},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.ttf","hash":"7f09c97f333917034ad08fa7295e916c9f72fd3f","modified":1584533819750},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.svg","hash":"46fcc0194d75a0ddac0a038aee41b23456784814","modified":1584533819749},{"_id":"themes/landscape/source/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1584533819753},{"_id":"public/2020/03/18/zsh/index.html","hash":"c91d62c131fafa3c9c0bfd6568b39a2186d74a31","modified":1584548505598},{"_id":"public/2020/03/18/搭建hexo+github博客/index.html","hash":"132efe5cc0fdf4df7391f6c7d8646bb83f019e8c","modified":1584548505598},{"_id":"public/archives/index.html","hash":"ad758baf2c5542e4d88cdbce17d52167a21a91e9","modified":1584548505598},{"_id":"public/archives/2019/index.html","hash":"84b08ae7884a79d55fbee6572e87e74c55c4893f","modified":1584548505598},{"_id":"public/archives/2019/04/index.html","hash":"4d77e2172a3ca1a7ac8dfe668fed9443054e4cb9","modified":1584548505598},{"_id":"public/archives/2020/index.html","hash":"2c88d0a7a443649a63bcc4966d59b4480c6443a3","modified":1584548505598},{"_id":"public/archives/2020/03/index.html","hash":"ac64db58f94a69f0ca2e1d6373c31fa7477be5d3","modified":1584548505598},{"_id":"public/2019/04/03/mysql-master-slave/index.html","hash":"9f80205deb5a5fe6f8230ce974299014544223a0","modified":1584548505598},{"_id":"public/index.html","hash":"80452c6c3c59830ad7c1eb70e9839659d825f9f8","modified":1584548505598},{"_id":"public/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1584548505598},{"_id":"public/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1584548505598},{"_id":"public/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1584548505598},{"_id":"public/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1584548505598},{"_id":"public/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1584548505598},{"_id":"public/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1584548505598},{"_id":"public/css/fonts/FontAwesome.otf","hash":"b5b4f9be85f91f10799e87a083da1d050f842734","modified":1584548505598},{"_id":"public/css/fonts/fontawesome-webfont.eot","hash":"7619748fe34c64fb157a57f6d4ef3678f63a8f5e","modified":1584548505598},{"_id":"public/css/fonts/fontawesome-webfont.woff","hash":"04c3bf56d87a0828935bd6b4aee859995f321693","modified":1584548505598},{"_id":"public/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1584548505598},{"_id":"public/css/fonts/fontawesome-webfont.ttf","hash":"7f09c97f333917034ad08fa7295e916c9f72fd3f","modified":1584548505598},{"_id":"public/fancybox/jquery.fancybox.css","hash":"aaa582fb9eb4b7092dc69fcb2d5b1c20cca58ab6","modified":1584548505598},{"_id":"public/js/script.js","hash":"2876e0b19ce557fca38d7c6f49ca55922ab666a1","modified":1584548505598},{"_id":"public/fancybox/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1584548505598},{"_id":"public/fancybox/helpers/jquery.fancybox-buttons.js","hash":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1584548505598},{"_id":"public/fancybox/helpers/jquery.fancybox-media.js","hash":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1584548505598},{"_id":"public/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1584548505598},{"_id":"public/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1584548505598},{"_id":"public/css/style.css","hash":"5f8dadd37d0052c557061018fe6f568f64fced9b","modified":1584548505598},{"_id":"public/fancybox/jquery.fancybox.pack.js","hash":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1584548505598},{"_id":"public/fancybox/jquery.fancybox.js","hash":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed","modified":1584548505598},{"_id":"public/css/fonts/fontawesome-webfont.svg","hash":"46fcc0194d75a0ddac0a038aee41b23456784814","modified":1584548505598},{"_id":"public/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1584548505598}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"mysql主从备份","date":"2019-04-03T09:19:55.000Z","_content":"# master的配置与启动\n## 配置容器\n* mkdir -p /etc/docker-data/mysql1/conf.d\n* vi /etc/docker-data/mysql1/conf.d/mysql.cnf\n```\n[mysqld]\npid-file    = /var/run/mysqld/mysqld.pid\nsocket    = /var/run/mysqld/mysqld.sock\ndatadir    = /var/lib/mysql\n\nsymbolic-links=0\n\ncharacter-set-server = utf8\n#skip-networking\ninnodb_print_all_deadlocks = 1\nmax_connections = 2000\nmax_connect_errors = 6000\nopen_files_limit = 65535\ntable_open_cache = 128\nmax_allowed_packet = 4M\nbinlog_cache_size = 1M\nmax_heap_table_size = 8M\ntmp_table_size = 16M\n\nread_buffer_size = 2M\nread_rnd_buffer_size = 8M\nsort_buffer_size = 8M\njoin_buffer_size = 28M\nkey_buffer_size = 4M\n\nthread_cache_size = 8\n\nquery_cache_type = 1\nquery_cache_size = 8M\nquery_cache_limit = 2M\n\nft_min_word_len = 4\n\nlog-bin = mysql-bin\nserver-id = 1\nbinlog_format = mixed\n\nperformance_schema = 0\nexplicit_defaults_for_timestamp\n\n#lower_case_table_names = 1\n\ninteractive_timeout = 28800\nwait_timeout = 28800\n\n# Recommended in standard MySQL setup\n\nsql_mode=NO_ENGINE_SUBSTITUTION,NO_AUTO_CREATE_USER,STRICT_TRANS_TABLES\n\n[mysqldump]\nquick\nmax_allowed_packet = 16M\n\n[myisamchk]\nkey_buffer_size = 8M\nsort_buffer_size = 8M\nread_buffer = 4M\nwrite_buffer = 4M\n```\n## 启动容器\ndocker run --name mysql1 -e MYSQL_ROOT_PASSWORD=123456 -p 3306:3306 -d -v /etc/docker-data/mysql1/conf.d:/etc/mysql/conf.d -v /logs/docker-data/mysql1:/logs -v /var/lib/docker-data/mysql1:/var/lib/mysql mysql:5.6\n## 进入容器开启slave远程访问\n```\nmysql> GRANT REPLICATION SLAVE ON *.* to 'reader'@'%' identified by 'readerpwd';\n\nQuery OK, 0 rows affected, 1 warning (0.00 sec)\n\nmysql> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.00 sec)\n```\n# slave的配置与启动\n## 配置容器\n* mkdir -p /etc/docker-data/mysql2/conf.d\n* vi /etc/docker-data/mysql2/conf.d/mysql.cnf\n```\n[mysqld]\npid-file    = /var/run/mysqld/mysqld.pid\nsocket    = /var/run/mysqld/mysqld.sock\ndatadir    = /var/lib/mysql\n\nsymbolic-links=0\n\ncharacter-set-server = utf8\n#skip-networking\ninnodb_print_all_deadlocks = 1\nmax_connections = 2000\nmax_connect_errors = 6000\nopen_files_limit = 65535\ntable_open_cache = 128\nmax_allowed_packet = 4M\nbinlog_cache_size = 1M\nmax_heap_table_size = 8M\ntmp_table_size = 16M\n\nread_buffer_size = 2M\nread_rnd_buffer_size = 8M\nsort_buffer_size = 8M\njoin_buffer_size = 28M\nkey_buffer_size = 4M\n\nthread_cache_size = 8\n\nquery_cache_type = 1\nquery_cache_size = 8M\nquery_cache_limit = 2M\n\nft_min_word_len = 4\n\nlog-bin = mysql-bin\nserver-id = 2\nbinlog_format = mixed\n\nperformance_schema = 0\nexplicit_defaults_for_timestamp\n\n#lower_case_table_names = 1\n\ninteractive_timeout = 28800\nwait_timeout = 28800\n\n# Recommended in standard MySQL setup\n\nsql_mode=NO_ENGINE_SUBSTITUTION,NO_AUTO_CREATE_USER,STRICT_TRANS_TABLES\n\n[mysqldump]\nquick\nmax_allowed_packet = 16M\n\n[myisamchk]\nkey_buffer_size = 8M\nsort_buffer_size = 8M\nread_buffer = 4M\nwrite_buffer = 4M\n```\n## 启动容器\n* docker run --name mysql2 -e MYSQL_ROOT_PASSWORD=123456 -p 3307:3306 -d -v /etc/docker-data/mysql2/conf.d:/etc/mysql/conf.d -v /logs/docker-data/mysql2:/logs -v /var/lib/docker-data/mysql2:/var/lib/mysql mysql:5.6\n\n# 主从复制配置\n* 进入master\n```\nmysql> show master status;\n+------------------+----------+--------------+------------------+-------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+------------------+----------+--------------+------------------+-------------------+\n| mysql-bin.000007 |      675 |              |                  |                   |\n+------------------+----------+--------------+------------------+-------------------+\nrow in set (0.00 sec)\n```\n* 进入slave\n```\nmysql> change master to master_host='172.16.114.118',master_user='reader',master_password='readerpwd',master_log_file='mysql-bin.000007',master_log_pos=675;\nQuery OK, 0 rows affected, 2 warnings (0.03 sec)\n\nmysql> start slave;\nQuery OK, 0 rows affected (0.03 sec)\n\n\n\nmysql> show slave status\\G\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for master to send event\n               Master_Host: 192.168.1.9\n                  Master_User: reader\n                  Master_Port: 3306\n                Connect_Retry: 60\n              Master_Log_File: mysql-bin.000007\n          Read_Master_Log_Pos: 501\n               Relay_Log_File: 0b763a8d1ddd-relay-bin.000002\n                Relay_Log_Pos: 320\n        Relay_Master_Log_File: mysql-bin.000007\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n```\n    * 其中172.16.114.118是docker宿主机ifconfig查得的结果\n    * 要保证master和slave初始数据状态完全一致\n\n# 主从复制测试\n## 进入master\n```\nmysql> create database slavetest;\nQuery OK, 1 row affected (0.00 sec)\n```\n## 进入slave\n```\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| slavetest          |\n| sys                |\n+--------------------+\nrows in set (0.00 sec)\n```","source":"_posts/mysql-master-slave.md","raw":"---\ntitle: mysql主从备份\ndate: 2019-04-03 17:19:55\ntags:\n---\n# master的配置与启动\n## 配置容器\n* mkdir -p /etc/docker-data/mysql1/conf.d\n* vi /etc/docker-data/mysql1/conf.d/mysql.cnf\n```\n[mysqld]\npid-file    = /var/run/mysqld/mysqld.pid\nsocket    = /var/run/mysqld/mysqld.sock\ndatadir    = /var/lib/mysql\n\nsymbolic-links=0\n\ncharacter-set-server = utf8\n#skip-networking\ninnodb_print_all_deadlocks = 1\nmax_connections = 2000\nmax_connect_errors = 6000\nopen_files_limit = 65535\ntable_open_cache = 128\nmax_allowed_packet = 4M\nbinlog_cache_size = 1M\nmax_heap_table_size = 8M\ntmp_table_size = 16M\n\nread_buffer_size = 2M\nread_rnd_buffer_size = 8M\nsort_buffer_size = 8M\njoin_buffer_size = 28M\nkey_buffer_size = 4M\n\nthread_cache_size = 8\n\nquery_cache_type = 1\nquery_cache_size = 8M\nquery_cache_limit = 2M\n\nft_min_word_len = 4\n\nlog-bin = mysql-bin\nserver-id = 1\nbinlog_format = mixed\n\nperformance_schema = 0\nexplicit_defaults_for_timestamp\n\n#lower_case_table_names = 1\n\ninteractive_timeout = 28800\nwait_timeout = 28800\n\n# Recommended in standard MySQL setup\n\nsql_mode=NO_ENGINE_SUBSTITUTION,NO_AUTO_CREATE_USER,STRICT_TRANS_TABLES\n\n[mysqldump]\nquick\nmax_allowed_packet = 16M\n\n[myisamchk]\nkey_buffer_size = 8M\nsort_buffer_size = 8M\nread_buffer = 4M\nwrite_buffer = 4M\n```\n## 启动容器\ndocker run --name mysql1 -e MYSQL_ROOT_PASSWORD=123456 -p 3306:3306 -d -v /etc/docker-data/mysql1/conf.d:/etc/mysql/conf.d -v /logs/docker-data/mysql1:/logs -v /var/lib/docker-data/mysql1:/var/lib/mysql mysql:5.6\n## 进入容器开启slave远程访问\n```\nmysql> GRANT REPLICATION SLAVE ON *.* to 'reader'@'%' identified by 'readerpwd';\n\nQuery OK, 0 rows affected, 1 warning (0.00 sec)\n\nmysql> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.00 sec)\n```\n# slave的配置与启动\n## 配置容器\n* mkdir -p /etc/docker-data/mysql2/conf.d\n* vi /etc/docker-data/mysql2/conf.d/mysql.cnf\n```\n[mysqld]\npid-file    = /var/run/mysqld/mysqld.pid\nsocket    = /var/run/mysqld/mysqld.sock\ndatadir    = /var/lib/mysql\n\nsymbolic-links=0\n\ncharacter-set-server = utf8\n#skip-networking\ninnodb_print_all_deadlocks = 1\nmax_connections = 2000\nmax_connect_errors = 6000\nopen_files_limit = 65535\ntable_open_cache = 128\nmax_allowed_packet = 4M\nbinlog_cache_size = 1M\nmax_heap_table_size = 8M\ntmp_table_size = 16M\n\nread_buffer_size = 2M\nread_rnd_buffer_size = 8M\nsort_buffer_size = 8M\njoin_buffer_size = 28M\nkey_buffer_size = 4M\n\nthread_cache_size = 8\n\nquery_cache_type = 1\nquery_cache_size = 8M\nquery_cache_limit = 2M\n\nft_min_word_len = 4\n\nlog-bin = mysql-bin\nserver-id = 2\nbinlog_format = mixed\n\nperformance_schema = 0\nexplicit_defaults_for_timestamp\n\n#lower_case_table_names = 1\n\ninteractive_timeout = 28800\nwait_timeout = 28800\n\n# Recommended in standard MySQL setup\n\nsql_mode=NO_ENGINE_SUBSTITUTION,NO_AUTO_CREATE_USER,STRICT_TRANS_TABLES\n\n[mysqldump]\nquick\nmax_allowed_packet = 16M\n\n[myisamchk]\nkey_buffer_size = 8M\nsort_buffer_size = 8M\nread_buffer = 4M\nwrite_buffer = 4M\n```\n## 启动容器\n* docker run --name mysql2 -e MYSQL_ROOT_PASSWORD=123456 -p 3307:3306 -d -v /etc/docker-data/mysql2/conf.d:/etc/mysql/conf.d -v /logs/docker-data/mysql2:/logs -v /var/lib/docker-data/mysql2:/var/lib/mysql mysql:5.6\n\n# 主从复制配置\n* 进入master\n```\nmysql> show master status;\n+------------------+----------+--------------+------------------+-------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+------------------+----------+--------------+------------------+-------------------+\n| mysql-bin.000007 |      675 |              |                  |                   |\n+------------------+----------+--------------+------------------+-------------------+\nrow in set (0.00 sec)\n```\n* 进入slave\n```\nmysql> change master to master_host='172.16.114.118',master_user='reader',master_password='readerpwd',master_log_file='mysql-bin.000007',master_log_pos=675;\nQuery OK, 0 rows affected, 2 warnings (0.03 sec)\n\nmysql> start slave;\nQuery OK, 0 rows affected (0.03 sec)\n\n\n\nmysql> show slave status\\G\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for master to send event\n               Master_Host: 192.168.1.9\n                  Master_User: reader\n                  Master_Port: 3306\n                Connect_Retry: 60\n              Master_Log_File: mysql-bin.000007\n          Read_Master_Log_Pos: 501\n               Relay_Log_File: 0b763a8d1ddd-relay-bin.000002\n                Relay_Log_Pos: 320\n        Relay_Master_Log_File: mysql-bin.000007\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n```\n    * 其中172.16.114.118是docker宿主机ifconfig查得的结果\n    * 要保证master和slave初始数据状态完全一致\n\n# 主从复制测试\n## 进入master\n```\nmysql> create database slavetest;\nQuery OK, 1 row affected (0.00 sec)\n```\n## 进入slave\n```\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| slavetest          |\n| sys                |\n+--------------------+\nrows in set (0.00 sec)\n```","slug":"mysql-master-slave","published":1,"updated":"2020-03-18T10:41:31.500Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7xj9o460000l2q5hkwtdr88","content":"<h1 id=\"master的配置与启动\"><a href=\"#master的配置与启动\" class=\"headerlink\" title=\"master的配置与启动\"></a>master的配置与启动</h1><h2 id=\"配置容器\"><a href=\"#配置容器\" class=\"headerlink\" title=\"配置容器\"></a>配置容器</h2><ul>\n<li>mkdir -p /etc/docker-data/mysql1/conf.d</li>\n<li>vi /etc/docker-data/mysql1/conf.d/mysql.cnf<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">pid-file    &#x3D; &#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.pid</span><br><span class=\"line\">socket    &#x3D; &#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.sock</span><br><span class=\"line\">datadir    &#x3D; &#x2F;var&#x2F;lib&#x2F;mysql</span><br><span class=\"line\"></span><br><span class=\"line\">symbolic-links&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\">character-set-server &#x3D; utf8</span><br><span class=\"line\">#skip-networking</span><br><span class=\"line\">innodb_print_all_deadlocks &#x3D; 1</span><br><span class=\"line\">max_connections &#x3D; 2000</span><br><span class=\"line\">max_connect_errors &#x3D; 6000</span><br><span class=\"line\">open_files_limit &#x3D; 65535</span><br><span class=\"line\">table_open_cache &#x3D; 128</span><br><span class=\"line\">max_allowed_packet &#x3D; 4M</span><br><span class=\"line\">binlog_cache_size &#x3D; 1M</span><br><span class=\"line\">max_heap_table_size &#x3D; 8M</span><br><span class=\"line\">tmp_table_size &#x3D; 16M</span><br><span class=\"line\"></span><br><span class=\"line\">read_buffer_size &#x3D; 2M</span><br><span class=\"line\">read_rnd_buffer_size &#x3D; 8M</span><br><span class=\"line\">sort_buffer_size &#x3D; 8M</span><br><span class=\"line\">join_buffer_size &#x3D; 28M</span><br><span class=\"line\">key_buffer_size &#x3D; 4M</span><br><span class=\"line\"></span><br><span class=\"line\">thread_cache_size &#x3D; 8</span><br><span class=\"line\"></span><br><span class=\"line\">query_cache_type &#x3D; 1</span><br><span class=\"line\">query_cache_size &#x3D; 8M</span><br><span class=\"line\">query_cache_limit &#x3D; 2M</span><br><span class=\"line\"></span><br><span class=\"line\">ft_min_word_len &#x3D; 4</span><br><span class=\"line\"></span><br><span class=\"line\">log-bin &#x3D; mysql-bin</span><br><span class=\"line\">server-id &#x3D; 1</span><br><span class=\"line\">binlog_format &#x3D; mixed</span><br><span class=\"line\"></span><br><span class=\"line\">performance_schema &#x3D; 0</span><br><span class=\"line\">explicit_defaults_for_timestamp</span><br><span class=\"line\"></span><br><span class=\"line\">#lower_case_table_names &#x3D; 1</span><br><span class=\"line\"></span><br><span class=\"line\">interactive_timeout &#x3D; 28800</span><br><span class=\"line\">wait_timeout &#x3D; 28800</span><br><span class=\"line\"></span><br><span class=\"line\"># Recommended in standard MySQL setup</span><br><span class=\"line\"></span><br><span class=\"line\">sql_mode&#x3D;NO_ENGINE_SUBSTITUTION,NO_AUTO_CREATE_USER,STRICT_TRANS_TABLES</span><br><span class=\"line\"></span><br><span class=\"line\">[mysqldump]</span><br><span class=\"line\">quick</span><br><span class=\"line\">max_allowed_packet &#x3D; 16M</span><br><span class=\"line\"></span><br><span class=\"line\">[myisamchk]</span><br><span class=\"line\">key_buffer_size &#x3D; 8M</span><br><span class=\"line\">sort_buffer_size &#x3D; 8M</span><br><span class=\"line\">read_buffer &#x3D; 4M</span><br><span class=\"line\">write_buffer &#x3D; 4M</span><br></pre></td></tr></table></figure>\n<h2 id=\"启动容器\"><a href=\"#启动容器\" class=\"headerlink\" title=\"启动容器\"></a>启动容器</h2>docker run –name mysql1 -e MYSQL_ROOT_PASSWORD=123456 -p 3306:3306 -d -v /etc/docker-data/mysql1/conf.d:/etc/mysql/conf.d -v /logs/docker-data/mysql1:/logs -v /var/lib/docker-data/mysql1:/var/lib/mysql mysql:5.6<h2 id=\"进入容器开启slave远程访问\"><a href=\"#进入容器开启slave远程访问\" class=\"headerlink\" title=\"进入容器开启slave远程访问\"></a>进入容器开启slave远程访问</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; GRANT REPLICATION SLAVE ON *.* to &#39;reader&#39;@&#39;%&#39; identified by &#39;readerpwd&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n<h1 id=\"slave的配置与启动\"><a href=\"#slave的配置与启动\" class=\"headerlink\" title=\"slave的配置与启动\"></a>slave的配置与启动</h1><h2 id=\"配置容器-1\"><a href=\"#配置容器-1\" class=\"headerlink\" title=\"配置容器\"></a>配置容器</h2></li>\n<li>mkdir -p /etc/docker-data/mysql2/conf.d</li>\n<li>vi /etc/docker-data/mysql2/conf.d/mysql.cnf<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">pid-file    &#x3D; &#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.pid</span><br><span class=\"line\">socket    &#x3D; &#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.sock</span><br><span class=\"line\">datadir    &#x3D; &#x2F;var&#x2F;lib&#x2F;mysql</span><br><span class=\"line\"></span><br><span class=\"line\">symbolic-links&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\">character-set-server &#x3D; utf8</span><br><span class=\"line\">#skip-networking</span><br><span class=\"line\">innodb_print_all_deadlocks &#x3D; 1</span><br><span class=\"line\">max_connections &#x3D; 2000</span><br><span class=\"line\">max_connect_errors &#x3D; 6000</span><br><span class=\"line\">open_files_limit &#x3D; 65535</span><br><span class=\"line\">table_open_cache &#x3D; 128</span><br><span class=\"line\">max_allowed_packet &#x3D; 4M</span><br><span class=\"line\">binlog_cache_size &#x3D; 1M</span><br><span class=\"line\">max_heap_table_size &#x3D; 8M</span><br><span class=\"line\">tmp_table_size &#x3D; 16M</span><br><span class=\"line\"></span><br><span class=\"line\">read_buffer_size &#x3D; 2M</span><br><span class=\"line\">read_rnd_buffer_size &#x3D; 8M</span><br><span class=\"line\">sort_buffer_size &#x3D; 8M</span><br><span class=\"line\">join_buffer_size &#x3D; 28M</span><br><span class=\"line\">key_buffer_size &#x3D; 4M</span><br><span class=\"line\"></span><br><span class=\"line\">thread_cache_size &#x3D; 8</span><br><span class=\"line\"></span><br><span class=\"line\">query_cache_type &#x3D; 1</span><br><span class=\"line\">query_cache_size &#x3D; 8M</span><br><span class=\"line\">query_cache_limit &#x3D; 2M</span><br><span class=\"line\"></span><br><span class=\"line\">ft_min_word_len &#x3D; 4</span><br><span class=\"line\"></span><br><span class=\"line\">log-bin &#x3D; mysql-bin</span><br><span class=\"line\">server-id &#x3D; 2</span><br><span class=\"line\">binlog_format &#x3D; mixed</span><br><span class=\"line\"></span><br><span class=\"line\">performance_schema &#x3D; 0</span><br><span class=\"line\">explicit_defaults_for_timestamp</span><br><span class=\"line\"></span><br><span class=\"line\">#lower_case_table_names &#x3D; 1</span><br><span class=\"line\"></span><br><span class=\"line\">interactive_timeout &#x3D; 28800</span><br><span class=\"line\">wait_timeout &#x3D; 28800</span><br><span class=\"line\"></span><br><span class=\"line\"># Recommended in standard MySQL setup</span><br><span class=\"line\"></span><br><span class=\"line\">sql_mode&#x3D;NO_ENGINE_SUBSTITUTION,NO_AUTO_CREATE_USER,STRICT_TRANS_TABLES</span><br><span class=\"line\"></span><br><span class=\"line\">[mysqldump]</span><br><span class=\"line\">quick</span><br><span class=\"line\">max_allowed_packet &#x3D; 16M</span><br><span class=\"line\"></span><br><span class=\"line\">[myisamchk]</span><br><span class=\"line\">key_buffer_size &#x3D; 8M</span><br><span class=\"line\">sort_buffer_size &#x3D; 8M</span><br><span class=\"line\">read_buffer &#x3D; 4M</span><br><span class=\"line\">write_buffer &#x3D; 4M</span><br></pre></td></tr></table></figure>\n<h2 id=\"启动容器-1\"><a href=\"#启动容器-1\" class=\"headerlink\" title=\"启动容器\"></a>启动容器</h2></li>\n<li>docker run –name mysql2 -e MYSQL_ROOT_PASSWORD=123456 -p 3307:3306 -d -v /etc/docker-data/mysql2/conf.d:/etc/mysql/conf.d -v /logs/docker-data/mysql2:/logs -v /var/lib/docker-data/mysql2:/var/lib/mysql mysql:5.6</li>\n</ul>\n<h1 id=\"主从复制配置\"><a href=\"#主从复制配置\" class=\"headerlink\" title=\"主从复制配置\"></a>主从复制配置</h1><ul>\n<li>进入master<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show master status;</span><br><span class=\"line\">+------------------+----------+--------------+------------------+-------------------+</span><br><span class=\"line\">| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |</span><br><span class=\"line\">+------------------+----------+--------------+------------------+-------------------+</span><br><span class=\"line\">| mysql-bin.000007 |      675 |              |                  |                   |</span><br><span class=\"line\">+------------------+----------+--------------+------------------+-------------------+</span><br><span class=\"line\">row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>\n<li>进入slave<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; change master to master_host&#x3D;&#39;172.16.114.118&#39;,master_user&#x3D;&#39;reader&#39;,master_password&#x3D;&#39;readerpwd&#39;,master_log_file&#x3D;&#39;mysql-bin.000007&#39;,master_log_pos&#x3D;675;</span><br><span class=\"line\">Query OK, 0 rows affected, 2 warnings (0.03 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; start slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.03 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show slave status\\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">               Slave_IO_State: Waiting for master to send event</span><br><span class=\"line\">               Master_Host: 192.168.1.9</span><br><span class=\"line\">                  Master_User: reader</span><br><span class=\"line\">                  Master_Port: 3306</span><br><span class=\"line\">                Connect_Retry: 60</span><br><span class=\"line\">              Master_Log_File: mysql-bin.000007</span><br><span class=\"line\">          Read_Master_Log_Pos: 501</span><br><span class=\"line\">               Relay_Log_File: 0b763a8d1ddd-relay-bin.000002</span><br><span class=\"line\">                Relay_Log_Pos: 320</span><br><span class=\"line\">        Relay_Master_Log_File: mysql-bin.000007</span><br><span class=\"line\">             Slave_IO_Running: Yes</span><br><span class=\"line\">            Slave_SQL_Running: Yes</span><br></pre></td></tr></table></figure>\n<ul>\n<li>其中172.16.114.118是docker宿主机ifconfig查得的结果</li>\n<li>要保证master和slave初始数据状态完全一致</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"主从复制测试\"><a href=\"#主从复制测试\" class=\"headerlink\" title=\"主从复制测试\"></a>主从复制测试</h1><h2 id=\"进入master\"><a href=\"#进入master\" class=\"headerlink\" title=\"进入master\"></a>进入master</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; create database slavetest;</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n<h2 id=\"进入slave\"><a href=\"#进入slave\" class=\"headerlink\" title=\"进入slave\"></a>进入slave</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show databases;</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| Database           |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| information_schema |</span><br><span class=\"line\">| mysql              |</span><br><span class=\"line\">| performance_schema |</span><br><span class=\"line\">| slavetest          |</span><br><span class=\"line\">| sys                |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"master的配置与启动\"><a href=\"#master的配置与启动\" class=\"headerlink\" title=\"master的配置与启动\"></a>master的配置与启动</h1><h2 id=\"配置容器\"><a href=\"#配置容器\" class=\"headerlink\" title=\"配置容器\"></a>配置容器</h2><ul>\n<li>mkdir -p /etc/docker-data/mysql1/conf.d</li>\n<li>vi /etc/docker-data/mysql1/conf.d/mysql.cnf<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">pid-file    &#x3D; &#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.pid</span><br><span class=\"line\">socket    &#x3D; &#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.sock</span><br><span class=\"line\">datadir    &#x3D; &#x2F;var&#x2F;lib&#x2F;mysql</span><br><span class=\"line\"></span><br><span class=\"line\">symbolic-links&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\">character-set-server &#x3D; utf8</span><br><span class=\"line\">#skip-networking</span><br><span class=\"line\">innodb_print_all_deadlocks &#x3D; 1</span><br><span class=\"line\">max_connections &#x3D; 2000</span><br><span class=\"line\">max_connect_errors &#x3D; 6000</span><br><span class=\"line\">open_files_limit &#x3D; 65535</span><br><span class=\"line\">table_open_cache &#x3D; 128</span><br><span class=\"line\">max_allowed_packet &#x3D; 4M</span><br><span class=\"line\">binlog_cache_size &#x3D; 1M</span><br><span class=\"line\">max_heap_table_size &#x3D; 8M</span><br><span class=\"line\">tmp_table_size &#x3D; 16M</span><br><span class=\"line\"></span><br><span class=\"line\">read_buffer_size &#x3D; 2M</span><br><span class=\"line\">read_rnd_buffer_size &#x3D; 8M</span><br><span class=\"line\">sort_buffer_size &#x3D; 8M</span><br><span class=\"line\">join_buffer_size &#x3D; 28M</span><br><span class=\"line\">key_buffer_size &#x3D; 4M</span><br><span class=\"line\"></span><br><span class=\"line\">thread_cache_size &#x3D; 8</span><br><span class=\"line\"></span><br><span class=\"line\">query_cache_type &#x3D; 1</span><br><span class=\"line\">query_cache_size &#x3D; 8M</span><br><span class=\"line\">query_cache_limit &#x3D; 2M</span><br><span class=\"line\"></span><br><span class=\"line\">ft_min_word_len &#x3D; 4</span><br><span class=\"line\"></span><br><span class=\"line\">log-bin &#x3D; mysql-bin</span><br><span class=\"line\">server-id &#x3D; 1</span><br><span class=\"line\">binlog_format &#x3D; mixed</span><br><span class=\"line\"></span><br><span class=\"line\">performance_schema &#x3D; 0</span><br><span class=\"line\">explicit_defaults_for_timestamp</span><br><span class=\"line\"></span><br><span class=\"line\">#lower_case_table_names &#x3D; 1</span><br><span class=\"line\"></span><br><span class=\"line\">interactive_timeout &#x3D; 28800</span><br><span class=\"line\">wait_timeout &#x3D; 28800</span><br><span class=\"line\"></span><br><span class=\"line\"># Recommended in standard MySQL setup</span><br><span class=\"line\"></span><br><span class=\"line\">sql_mode&#x3D;NO_ENGINE_SUBSTITUTION,NO_AUTO_CREATE_USER,STRICT_TRANS_TABLES</span><br><span class=\"line\"></span><br><span class=\"line\">[mysqldump]</span><br><span class=\"line\">quick</span><br><span class=\"line\">max_allowed_packet &#x3D; 16M</span><br><span class=\"line\"></span><br><span class=\"line\">[myisamchk]</span><br><span class=\"line\">key_buffer_size &#x3D; 8M</span><br><span class=\"line\">sort_buffer_size &#x3D; 8M</span><br><span class=\"line\">read_buffer &#x3D; 4M</span><br><span class=\"line\">write_buffer &#x3D; 4M</span><br></pre></td></tr></table></figure>\n<h2 id=\"启动容器\"><a href=\"#启动容器\" class=\"headerlink\" title=\"启动容器\"></a>启动容器</h2>docker run –name mysql1 -e MYSQL_ROOT_PASSWORD=123456 -p 3306:3306 -d -v /etc/docker-data/mysql1/conf.d:/etc/mysql/conf.d -v /logs/docker-data/mysql1:/logs -v /var/lib/docker-data/mysql1:/var/lib/mysql mysql:5.6<h2 id=\"进入容器开启slave远程访问\"><a href=\"#进入容器开启slave远程访问\" class=\"headerlink\" title=\"进入容器开启slave远程访问\"></a>进入容器开启slave远程访问</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; GRANT REPLICATION SLAVE ON *.* to &#39;reader&#39;@&#39;%&#39; identified by &#39;readerpwd&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n<h1 id=\"slave的配置与启动\"><a href=\"#slave的配置与启动\" class=\"headerlink\" title=\"slave的配置与启动\"></a>slave的配置与启动</h1><h2 id=\"配置容器-1\"><a href=\"#配置容器-1\" class=\"headerlink\" title=\"配置容器\"></a>配置容器</h2></li>\n<li>mkdir -p /etc/docker-data/mysql2/conf.d</li>\n<li>vi /etc/docker-data/mysql2/conf.d/mysql.cnf<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">pid-file    &#x3D; &#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.pid</span><br><span class=\"line\">socket    &#x3D; &#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.sock</span><br><span class=\"line\">datadir    &#x3D; &#x2F;var&#x2F;lib&#x2F;mysql</span><br><span class=\"line\"></span><br><span class=\"line\">symbolic-links&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\">character-set-server &#x3D; utf8</span><br><span class=\"line\">#skip-networking</span><br><span class=\"line\">innodb_print_all_deadlocks &#x3D; 1</span><br><span class=\"line\">max_connections &#x3D; 2000</span><br><span class=\"line\">max_connect_errors &#x3D; 6000</span><br><span class=\"line\">open_files_limit &#x3D; 65535</span><br><span class=\"line\">table_open_cache &#x3D; 128</span><br><span class=\"line\">max_allowed_packet &#x3D; 4M</span><br><span class=\"line\">binlog_cache_size &#x3D; 1M</span><br><span class=\"line\">max_heap_table_size &#x3D; 8M</span><br><span class=\"line\">tmp_table_size &#x3D; 16M</span><br><span class=\"line\"></span><br><span class=\"line\">read_buffer_size &#x3D; 2M</span><br><span class=\"line\">read_rnd_buffer_size &#x3D; 8M</span><br><span class=\"line\">sort_buffer_size &#x3D; 8M</span><br><span class=\"line\">join_buffer_size &#x3D; 28M</span><br><span class=\"line\">key_buffer_size &#x3D; 4M</span><br><span class=\"line\"></span><br><span class=\"line\">thread_cache_size &#x3D; 8</span><br><span class=\"line\"></span><br><span class=\"line\">query_cache_type &#x3D; 1</span><br><span class=\"line\">query_cache_size &#x3D; 8M</span><br><span class=\"line\">query_cache_limit &#x3D; 2M</span><br><span class=\"line\"></span><br><span class=\"line\">ft_min_word_len &#x3D; 4</span><br><span class=\"line\"></span><br><span class=\"line\">log-bin &#x3D; mysql-bin</span><br><span class=\"line\">server-id &#x3D; 2</span><br><span class=\"line\">binlog_format &#x3D; mixed</span><br><span class=\"line\"></span><br><span class=\"line\">performance_schema &#x3D; 0</span><br><span class=\"line\">explicit_defaults_for_timestamp</span><br><span class=\"line\"></span><br><span class=\"line\">#lower_case_table_names &#x3D; 1</span><br><span class=\"line\"></span><br><span class=\"line\">interactive_timeout &#x3D; 28800</span><br><span class=\"line\">wait_timeout &#x3D; 28800</span><br><span class=\"line\"></span><br><span class=\"line\"># Recommended in standard MySQL setup</span><br><span class=\"line\"></span><br><span class=\"line\">sql_mode&#x3D;NO_ENGINE_SUBSTITUTION,NO_AUTO_CREATE_USER,STRICT_TRANS_TABLES</span><br><span class=\"line\"></span><br><span class=\"line\">[mysqldump]</span><br><span class=\"line\">quick</span><br><span class=\"line\">max_allowed_packet &#x3D; 16M</span><br><span class=\"line\"></span><br><span class=\"line\">[myisamchk]</span><br><span class=\"line\">key_buffer_size &#x3D; 8M</span><br><span class=\"line\">sort_buffer_size &#x3D; 8M</span><br><span class=\"line\">read_buffer &#x3D; 4M</span><br><span class=\"line\">write_buffer &#x3D; 4M</span><br></pre></td></tr></table></figure>\n<h2 id=\"启动容器-1\"><a href=\"#启动容器-1\" class=\"headerlink\" title=\"启动容器\"></a>启动容器</h2></li>\n<li>docker run –name mysql2 -e MYSQL_ROOT_PASSWORD=123456 -p 3307:3306 -d -v /etc/docker-data/mysql2/conf.d:/etc/mysql/conf.d -v /logs/docker-data/mysql2:/logs -v /var/lib/docker-data/mysql2:/var/lib/mysql mysql:5.6</li>\n</ul>\n<h1 id=\"主从复制配置\"><a href=\"#主从复制配置\" class=\"headerlink\" title=\"主从复制配置\"></a>主从复制配置</h1><ul>\n<li>进入master<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show master status;</span><br><span class=\"line\">+------------------+----------+--------------+------------------+-------------------+</span><br><span class=\"line\">| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |</span><br><span class=\"line\">+------------------+----------+--------------+------------------+-------------------+</span><br><span class=\"line\">| mysql-bin.000007 |      675 |              |                  |                   |</span><br><span class=\"line\">+------------------+----------+--------------+------------------+-------------------+</span><br><span class=\"line\">row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>\n<li>进入slave<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; change master to master_host&#x3D;&#39;172.16.114.118&#39;,master_user&#x3D;&#39;reader&#39;,master_password&#x3D;&#39;readerpwd&#39;,master_log_file&#x3D;&#39;mysql-bin.000007&#39;,master_log_pos&#x3D;675;</span><br><span class=\"line\">Query OK, 0 rows affected, 2 warnings (0.03 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; start slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.03 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show slave status\\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">               Slave_IO_State: Waiting for master to send event</span><br><span class=\"line\">               Master_Host: 192.168.1.9</span><br><span class=\"line\">                  Master_User: reader</span><br><span class=\"line\">                  Master_Port: 3306</span><br><span class=\"line\">                Connect_Retry: 60</span><br><span class=\"line\">              Master_Log_File: mysql-bin.000007</span><br><span class=\"line\">          Read_Master_Log_Pos: 501</span><br><span class=\"line\">               Relay_Log_File: 0b763a8d1ddd-relay-bin.000002</span><br><span class=\"line\">                Relay_Log_Pos: 320</span><br><span class=\"line\">        Relay_Master_Log_File: mysql-bin.000007</span><br><span class=\"line\">             Slave_IO_Running: Yes</span><br><span class=\"line\">            Slave_SQL_Running: Yes</span><br></pre></td></tr></table></figure>\n<ul>\n<li>其中172.16.114.118是docker宿主机ifconfig查得的结果</li>\n<li>要保证master和slave初始数据状态完全一致</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"主从复制测试\"><a href=\"#主从复制测试\" class=\"headerlink\" title=\"主从复制测试\"></a>主从复制测试</h1><h2 id=\"进入master\"><a href=\"#进入master\" class=\"headerlink\" title=\"进入master\"></a>进入master</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; create database slavetest;</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n<h2 id=\"进入slave\"><a href=\"#进入slave\" class=\"headerlink\" title=\"进入slave\"></a>进入slave</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show databases;</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| Database           |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| information_schema |</span><br><span class=\"line\">| mysql              |</span><br><span class=\"line\">| performance_schema |</span><br><span class=\"line\">| slavetest          |</span><br><span class=\"line\">| sys                |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>"},{"title":"zsh安装与使用","date":"2020-03-18T15:05:29.000Z","_content":"\n### 安装oh-my-zsh\n```shell\ngit clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh\n```\n### zsh的开启\n设置zsh为你的默认的shell\n```shell\nchsh -s /bin/zsh\n```\n重启并开始使用你的zsh (打开一个新的终端窗口便可)\n\n### 插件安装方法\n以安装zsh-autosuggestions为例\n```shell\ngit clone git://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions\n```\n编辑~/.zshrc文件，找到plugins=(git)这一行，然后再添加autosuggestions，最后为\n```shell\nplugins=(git zsh-autosuggestions)\n```\nsource ./zshrc更新下你的zsh\n\n### 常用插件\n* z\n* zsh-autosuggestions\n\n### 修改主题\n编辑~/.zshrc文件，找到ZSH_THEME=\"robbyrussell\"这一行，修改为推荐主题ys，最后为\n```shell\nZSH_THEME=\"ys\"\n```","source":"_posts/zsh.md","raw":"---\ntitle: zsh安装与使用\ndate: 2020-03-18 23:05:29\ntags:\n\n---\n\n### 安装oh-my-zsh\n```shell\ngit clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh\n```\n### zsh的开启\n设置zsh为你的默认的shell\n```shell\nchsh -s /bin/zsh\n```\n重启并开始使用你的zsh (打开一个新的终端窗口便可)\n\n### 插件安装方法\n以安装zsh-autosuggestions为例\n```shell\ngit clone git://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions\n```\n编辑~/.zshrc文件，找到plugins=(git)这一行，然后再添加autosuggestions，最后为\n```shell\nplugins=(git zsh-autosuggestions)\n```\nsource ./zshrc更新下你的zsh\n\n### 常用插件\n* z\n* zsh-autosuggestions\n\n### 修改主题\n编辑~/.zshrc文件，找到ZSH_THEME=\"robbyrussell\"这一行，修改为推荐主题ys，最后为\n```shell\nZSH_THEME=\"ys\"\n```","slug":"zsh","published":1,"updated":"2020-03-18T15:18:59.604Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7xj9o4c0001l2q5f0ws2z0x","content":"<h3 id=\"安装oh-my-zsh\"><a href=\"#安装oh-my-zsh\" class=\"headerlink\" title=\"安装oh-my-zsh\"></a>安装oh-my-zsh</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh</span><br></pre></td></tr></table></figure>\n<h3 id=\"zsh的开启\"><a href=\"#zsh的开启\" class=\"headerlink\" title=\"zsh的开启\"></a>zsh的开启</h3><p>设置zsh为你的默认的shell</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure>\n<p>重启并开始使用你的zsh (打开一个新的终端窗口便可)</p>\n<h3 id=\"插件安装方法\"><a href=\"#插件安装方法\" class=\"headerlink\" title=\"插件安装方法\"></a>插件安装方法</h3><p>以安装zsh-autosuggestions为例</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone git://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure>\n<p>编辑~/.zshrc文件，找到plugins=(git)这一行，然后再添加autosuggestions，最后为</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">plugins=(git zsh-autosuggestions)</span><br></pre></td></tr></table></figure>\n<p>source ./zshrc更新下你的zsh</p>\n<h3 id=\"常用插件\"><a href=\"#常用插件\" class=\"headerlink\" title=\"常用插件\"></a>常用插件</h3><ul>\n<li>z</li>\n<li>zsh-autosuggestions</li>\n</ul>\n<h3 id=\"修改主题\"><a href=\"#修改主题\" class=\"headerlink\" title=\"修改主题\"></a>修改主题</h3><p>编辑~/.zshrc文件，找到ZSH_THEME=”robbyrussell”这一行，修改为推荐主题ys，最后为</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ZSH_THEME=\"ys\"</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"安装oh-my-zsh\"><a href=\"#安装oh-my-zsh\" class=\"headerlink\" title=\"安装oh-my-zsh\"></a>安装oh-my-zsh</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh</span><br></pre></td></tr></table></figure>\n<h3 id=\"zsh的开启\"><a href=\"#zsh的开启\" class=\"headerlink\" title=\"zsh的开启\"></a>zsh的开启</h3><p>设置zsh为你的默认的shell</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure>\n<p>重启并开始使用你的zsh (打开一个新的终端窗口便可)</p>\n<h3 id=\"插件安装方法\"><a href=\"#插件安装方法\" class=\"headerlink\" title=\"插件安装方法\"></a>插件安装方法</h3><p>以安装zsh-autosuggestions为例</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone git://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure>\n<p>编辑~/.zshrc文件，找到plugins=(git)这一行，然后再添加autosuggestions，最后为</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">plugins=(git zsh-autosuggestions)</span><br></pre></td></tr></table></figure>\n<p>source ./zshrc更新下你的zsh</p>\n<h3 id=\"常用插件\"><a href=\"#常用插件\" class=\"headerlink\" title=\"常用插件\"></a>常用插件</h3><ul>\n<li>z</li>\n<li>zsh-autosuggestions</li>\n</ul>\n<h3 id=\"修改主题\"><a href=\"#修改主题\" class=\"headerlink\" title=\"修改主题\"></a>修改主题</h3><p>编辑~/.zshrc文件，找到ZSH_THEME=”robbyrussell”这一行，修改为推荐主题ys，最后为</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ZSH_THEME=\"ys\"</span><br></pre></td></tr></table></figure>"},{"title":"搭建hexo+github","date":"2020-03-18T10:50:45.000Z","_content":"\n### 新建仓库\ngithub新建一个仓库，仓库名必须为 &lt;user-name>.github.io 格式，其中 &lt;user-name> 是你 github 的昵称。\n\n### 全局安装hexo\n```shell\nnpm install -g hexo\n```\n\n### 初始化项目\n新建本地项目hexo-blog，执行下述命令自动构建hexo项目\n```shell\nhexo init\n```\n\n### 主题引入\n主题官网为：https://hexo.io/themes\n以引入NexT主题为例，进入hexo项目的themes文件夹下\n```bash\ngit clone https://github.com/theme-next/hexo-theme-next.git\n```\n在hexo项目根目录下找到_config.xml，将theme属性改为hexo-theme-next\n\n### 部署到github\n编辑_config.xml，\n```\n# Deployment\n## Docs: https://hexo.io/docs/deployment.html\ndeploy:\n  type: git\n  repo: git@github.com:ruanyg/ruanyg.github.io.git\n  branch: master\n```\n安装hexo-deployer-git，用来帮助我们把博客项目推到仓库上\n```shell\nnpm install hexo-deployer-git --save\n```\n执行如下命令，把项目自动部署到github上\n```shell\n# 清除缓存\nhexo clean\n# 生成静态页面\nhexo g\n# 将资源提交到服务器中\nhexo d\n```\n\n### 查看效果\n浏览器访问：https://ruanyg.github.io/ 即可看到效果。\n\n### 创建新文章\n```shell\n# [layout] 为布局，可选项为 `post`、`page`、`draft`，这将决定文章所在文件路径。\n# <title> 为文章标题\n# 如 hexo new post 除了帅气，我还有啥！\nhexo new [layout] <title>\n```\n\n### 部署优化\n每次都要执行 hexo clean 和 hexo deploy，不如写个新的脚本，编辑package.json\n```shell\n\"dev\": \"hexo s\",\n\"build\": \"hexo clean & hexo deploy\"\n```\n\n### 接入评论系统 - valine\nhttps://valine.js.org/quickstart.html\n\n### 其他\n* [映射域名](https://www.jianshu.com/p/683a120c6264)","source":"_posts/搭建hexo+github博客.md","raw":"---\ntitle: 搭建hexo+github\ndate: 2020-03-18 18:50:45\ntags:\n---\n\n### 新建仓库\ngithub新建一个仓库，仓库名必须为 &lt;user-name>.github.io 格式，其中 &lt;user-name> 是你 github 的昵称。\n\n### 全局安装hexo\n```shell\nnpm install -g hexo\n```\n\n### 初始化项目\n新建本地项目hexo-blog，执行下述命令自动构建hexo项目\n```shell\nhexo init\n```\n\n### 主题引入\n主题官网为：https://hexo.io/themes\n以引入NexT主题为例，进入hexo项目的themes文件夹下\n```bash\ngit clone https://github.com/theme-next/hexo-theme-next.git\n```\n在hexo项目根目录下找到_config.xml，将theme属性改为hexo-theme-next\n\n### 部署到github\n编辑_config.xml，\n```\n# Deployment\n## Docs: https://hexo.io/docs/deployment.html\ndeploy:\n  type: git\n  repo: git@github.com:ruanyg/ruanyg.github.io.git\n  branch: master\n```\n安装hexo-deployer-git，用来帮助我们把博客项目推到仓库上\n```shell\nnpm install hexo-deployer-git --save\n```\n执行如下命令，把项目自动部署到github上\n```shell\n# 清除缓存\nhexo clean\n# 生成静态页面\nhexo g\n# 将资源提交到服务器中\nhexo d\n```\n\n### 查看效果\n浏览器访问：https://ruanyg.github.io/ 即可看到效果。\n\n### 创建新文章\n```shell\n# [layout] 为布局，可选项为 `post`、`page`、`draft`，这将决定文章所在文件路径。\n# <title> 为文章标题\n# 如 hexo new post 除了帅气，我还有啥！\nhexo new [layout] <title>\n```\n\n### 部署优化\n每次都要执行 hexo clean 和 hexo deploy，不如写个新的脚本，编辑package.json\n```shell\n\"dev\": \"hexo s\",\n\"build\": \"hexo clean & hexo deploy\"\n```\n\n### 接入评论系统 - valine\nhttps://valine.js.org/quickstart.html\n\n### 其他\n* [映射域名](https://www.jianshu.com/p/683a120c6264)","slug":"搭建hexo+github博客","published":1,"updated":"2020-03-18T13:40:30.954Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7xj9o4e0002l2q5amol0ca9","content":"<h3 id=\"新建仓库\"><a href=\"#新建仓库\" class=\"headerlink\" title=\"新建仓库\"></a>新建仓库</h3><p>github新建一个仓库，仓库名必须为 &lt;user-name&gt;.github.io 格式，其中 &lt;user-name&gt; 是你 github 的昵称。</p>\n<h3 id=\"全局安装hexo\"><a href=\"#全局安装hexo\" class=\"headerlink\" title=\"全局安装hexo\"></a>全局安装hexo</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g hexo</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"初始化项目\"><a href=\"#初始化项目\" class=\"headerlink\" title=\"初始化项目\"></a>初始化项目</h3><p>新建本地项目hexo-blog，执行下述命令自动构建hexo项目</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo init</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"主题引入\"><a href=\"#主题引入\" class=\"headerlink\" title=\"主题引入\"></a>主题引入</h3><p>主题官网为：<a href=\"https://hexo.io/themes\" target=\"_blank\" rel=\"noopener\">https://hexo.io/themes</a><br>以引入NexT主题为例，进入hexo项目的themes文件夹下</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/theme-next/hexo-theme-next.git</span><br></pre></td></tr></table></figure>\n<p>在hexo项目根目录下找到_config.xml，将theme属性改为hexo-theme-next</p>\n<h3 id=\"部署到github\"><a href=\"#部署到github\" class=\"headerlink\" title=\"部署到github\"></a>部署到github</h3><p>编辑_config.xml，</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Deployment</span><br><span class=\"line\">## Docs: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;deployment.html</span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  type: git</span><br><span class=\"line\">  repo: git@github.com:ruanyg&#x2F;ruanyg.github.io.git</span><br><span class=\"line\">  branch: master</span><br></pre></td></tr></table></figure>\n<p>安装hexo-deployer-git，用来帮助我们把博客项目推到仓库上</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n<p>执行如下命令，把项目自动部署到github上</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 清除缓存</span></span><br><span class=\"line\">hexo clean</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 生成静态页面</span></span><br><span class=\"line\">hexo g</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 将资源提交到服务器中</span></span><br><span class=\"line\">hexo d</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看效果\"><a href=\"#查看效果\" class=\"headerlink\" title=\"查看效果\"></a>查看效果</h3><p>浏览器访问：<a href=\"https://ruanyg.github.io/\" target=\"_blank\" rel=\"noopener\">https://ruanyg.github.io/</a> 即可看到效果。</p>\n<h3 id=\"创建新文章\"><a href=\"#创建新文章\" class=\"headerlink\" title=\"创建新文章\"></a>创建新文章</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> [layout] 为布局，可选项为 `post`、`page`、`draft`，这将决定文章所在文件路径。</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> &lt;title&gt; 为文章标题</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 如 hexo new post 除了帅气，我还有啥！</span></span><br><span class=\"line\">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"部署优化\"><a href=\"#部署优化\" class=\"headerlink\" title=\"部署优化\"></a>部署优化</h3><p>每次都要执行 hexo clean 和 hexo deploy，不如写个新的脚本，编辑package.json</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"dev\": \"hexo s\",</span><br><span class=\"line\">\"build\": \"hexo clean &amp; hexo deploy\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"接入评论系统-valine\"><a href=\"#接入评论系统-valine\" class=\"headerlink\" title=\"接入评论系统 - valine\"></a>接入评论系统 - valine</h3><p><a href=\"https://valine.js.org/quickstart.html\" target=\"_blank\" rel=\"noopener\">https://valine.js.org/quickstart.html</a></p>\n<h3 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h3><ul>\n<li><a href=\"https://www.jianshu.com/p/683a120c6264\" target=\"_blank\" rel=\"noopener\">映射域名</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"新建仓库\"><a href=\"#新建仓库\" class=\"headerlink\" title=\"新建仓库\"></a>新建仓库</h3><p>github新建一个仓库，仓库名必须为 &lt;user-name&gt;.github.io 格式，其中 &lt;user-name&gt; 是你 github 的昵称。</p>\n<h3 id=\"全局安装hexo\"><a href=\"#全局安装hexo\" class=\"headerlink\" title=\"全局安装hexo\"></a>全局安装hexo</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g hexo</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"初始化项目\"><a href=\"#初始化项目\" class=\"headerlink\" title=\"初始化项目\"></a>初始化项目</h3><p>新建本地项目hexo-blog，执行下述命令自动构建hexo项目</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo init</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"主题引入\"><a href=\"#主题引入\" class=\"headerlink\" title=\"主题引入\"></a>主题引入</h3><p>主题官网为：<a href=\"https://hexo.io/themes\" target=\"_blank\" rel=\"noopener\">https://hexo.io/themes</a><br>以引入NexT主题为例，进入hexo项目的themes文件夹下</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/theme-next/hexo-theme-next.git</span><br></pre></td></tr></table></figure>\n<p>在hexo项目根目录下找到_config.xml，将theme属性改为hexo-theme-next</p>\n<h3 id=\"部署到github\"><a href=\"#部署到github\" class=\"headerlink\" title=\"部署到github\"></a>部署到github</h3><p>编辑_config.xml，</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Deployment</span><br><span class=\"line\">## Docs: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;deployment.html</span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  type: git</span><br><span class=\"line\">  repo: git@github.com:ruanyg&#x2F;ruanyg.github.io.git</span><br><span class=\"line\">  branch: master</span><br></pre></td></tr></table></figure>\n<p>安装hexo-deployer-git，用来帮助我们把博客项目推到仓库上</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n<p>执行如下命令，把项目自动部署到github上</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 清除缓存</span></span><br><span class=\"line\">hexo clean</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 生成静态页面</span></span><br><span class=\"line\">hexo g</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 将资源提交到服务器中</span></span><br><span class=\"line\">hexo d</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看效果\"><a href=\"#查看效果\" class=\"headerlink\" title=\"查看效果\"></a>查看效果</h3><p>浏览器访问：<a href=\"https://ruanyg.github.io/\" target=\"_blank\" rel=\"noopener\">https://ruanyg.github.io/</a> 即可看到效果。</p>\n<h3 id=\"创建新文章\"><a href=\"#创建新文章\" class=\"headerlink\" title=\"创建新文章\"></a>创建新文章</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> [layout] 为布局，可选项为 `post`、`page`、`draft`，这将决定文章所在文件路径。</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> &lt;title&gt; 为文章标题</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 如 hexo new post 除了帅气，我还有啥！</span></span><br><span class=\"line\">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"部署优化\"><a href=\"#部署优化\" class=\"headerlink\" title=\"部署优化\"></a>部署优化</h3><p>每次都要执行 hexo clean 和 hexo deploy，不如写个新的脚本，编辑package.json</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"dev\": \"hexo s\",</span><br><span class=\"line\">\"build\": \"hexo clean &amp; hexo deploy\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"接入评论系统-valine\"><a href=\"#接入评论系统-valine\" class=\"headerlink\" title=\"接入评论系统 - valine\"></a>接入评论系统 - valine</h3><p><a href=\"https://valine.js.org/quickstart.html\" target=\"_blank\" rel=\"noopener\">https://valine.js.org/quickstart.html</a></p>\n<h3 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h3><ul>\n<li><a href=\"https://www.jianshu.com/p/683a120c6264\" target=\"_blank\" rel=\"noopener\">映射域名</a></li>\n</ul>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}